<div class="login-page">
    <mat-card class="mat-elevation-z12">
      <mat-card-title>Login/Register</mat-card-title>
      <mat-tab-group mat-stretch-tabs class="example-stretched-tabs">
        <mat-tab label="Sign In">
          <form class="login-form" [formGroup]="signInForm" (ngSubmit)="signIn()" #form1="ngForm">
            <mat-form-field>
              <input matInput placeholder="Email"  formControlName="username">
              <!-- <mat-icon matSuffix>username</mat-icon> -->
              <mat-error *ngIf="form1.submitted && signInForm.get('username')?.hasError('required')">
                Username is required
              </mat-error>
              <mat-error *ngIf="form1.submitted && signInForm.get('username')?.hasError('customError')">
                {{ signInForm.get('username')?.getError('customError') }}
              </mat-error>             
            </mat-form-field>
            <mat-form-field>
              <input matInput placeholder="Password" [type]="hide ? 'password' : 'text'"  formControlName="password">
              <!-- <mat-icon matSuffix>lock</mat-icon> -->
              <button type="button" mat-icon-button matSuffix (click)="hide = !hide" [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hide">
                <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
              </button>
              <mat-error *ngIf="form1.submitted && signInForm.get('password')?.hasError('required')">
                Password is required
              </mat-error> 
              <mat-error *ngIf="form1.submitted && signInForm.get('password')?.hasError('customError')">
                {{ signInForm.get('password')?.getError('customError') }}
              </mat-error>   
            </mat-form-field>
            <button mat-raised-button color="primary" class="login-button" type="submit">
              Sign In
            </button>
          </form>
        </mat-tab>
        <mat-tab label="Sign Up">
          <form class="login-form"  [formGroup]="signUpForm"  (ngSubmit)="signUp()"  #form2="ngForm">
            <mat-form-field>
              <input matInput placeholder="First Name" required formControlName="firstname">
              <mat-icon matSuffix>perm_identity</mat-icon>
              <mat-error *ngIf="form2.submitted && signUpForm.get('firstname')?.hasError('required')">
                firstname is required
              </mat-error>
            </mat-form-field>
            <mat-form-field>
              <input matInput placeholder="Last Name" required formControlName="lastname">
              <mat-icon matSuffix>perm_identity</mat-icon>
              <mat-error *ngIf="form2.submitted && signUpForm.get('lastname')?.hasError('required')">
                lastname is required
              </mat-error>
            </mat-form-field>
            <mat-form-field>
              <input matInput placeholder="User Name" required formControlName="username">
              <mat-icon matSuffix>account_circle</mat-icon>
              <mat-error *ngIf="form2.submitted && signUpForm.get('username')?.hasError('required')">
                Username is required
              </mat-error>
              <mat-error *ngIf="form2.submitted && signUpForm.get('username')?.hasError('customError')">
                {{ signUpForm.get('username')?.getError('customError') }}
              </mat-error>
            </mat-form-field>
            <mat-form-field>
              <input matInput placeholder="Email"  formControlName="email">
              <mat-icon matSuffix>email</mat-icon>
              <mat-error *ngIf="form2.submitted && signUpForm.get('email')?.hasError('required')">
                Email is required
              </mat-error>
              <mat-error *ngIf="signUpForm.get('email')?.hasError('email')">
                Please enter a valid email address
              </mat-error>
              <mat-error *ngIf="form2.submitted && signUpForm.get('email')?.hasError('customError')">
                {{ signUpForm.get('email')?.getError('customError') }}
              </mat-error>
            </mat-form-field>
            <mat-form-field>
              <input matInput placeholder="Password" type="password" required minlength="6" formControlName="password" >
              <mat-icon matSuffix>lock</mat-icon>
              <!-- <mat-error *ngIf="password.invalid && (password.dirty || password.touched)">
                Password must be at least 6 characters long
              </mat-error> -->
              <mat-error *ngIf="signUpForm.get('password')?.hasError('required')">
                Password is required
              </mat-error>
              <mat-error *ngIf="signUpForm.get('password')?.invalid && (signUpForm.get('password')?.dirty || signUpForm.get('password')?.touched)">
                Password must be at least 6 characters long
              </mat-error>
            </mat-form-field>
            <mat-form-field>
              <input matInput placeholder="Confirm Password" type="password" required minlength="6" name="confirmPassword" formControlName="confirmPassword">
              <mat-icon matSuffix>lock</mat-icon>
              <mat-error *ngIf="signUpForm.get('confirmPassword')?.hasError('passwordMismatch')">
                Passwords do not match
              </mat-error>
              <mat-error *ngIf="signUpForm.get('confirmPassword')?.hasError('required')">
                Please confirm your password
              </mat-error>
            </mat-form-field>
            <button mat-raised-button color="primary" class="login-button" type="submit" [disabled]="loading">
              <span *ngIf="!loading">Sign Up</span>
              <mat-spinner *ngIf="loading" diameter="20" color="accent"></mat-spinner> <!-- Add spinner -->
            </button>
          </form>
        </mat-tab>
      </mat-tab-group>
    </mat-card>
  </div>
  