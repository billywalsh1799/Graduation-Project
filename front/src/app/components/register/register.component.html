<div class="login-page">
  <mat-card class="mat-elevation-z12">
    <mat-card-header>
      <mat-card-title>Register</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <form class="login-form"  [formGroup]="signUpForm"  (ngSubmit)="signUp()"  #form2="ngForm">
        <mat-form-field>
          <input matInput placeholder="First Name" required formControlName="firstname">
          <mat-icon matSuffix>perm_identity</mat-icon>
          <mat-error *ngIf="form2.submitted && signUpForm.get('firstname')?.hasError('required')">
            firstname is required
          </mat-error>
        </mat-form-field>
        <mat-form-field>
          <input matInput placeholder="Last Name" required formControlName="lastname">
          <mat-icon matSuffix>perm_identity</mat-icon>
          <mat-error *ngIf="form2.submitted && signUpForm.get('lastname')?.hasError('required')">
            lastname is required
          </mat-error>
        </mat-form-field>
        <mat-form-field>
          <input matInput placeholder="User Name" required formControlName="username">
          <mat-icon matSuffix>account_circle</mat-icon>
          <mat-error *ngIf="form2.submitted && signUpForm.get('username')?.hasError('required')">
            Username is required
          </mat-error>
          <mat-error *ngIf="form2.submitted && signUpForm.get('username')?.hasError('customError')">
            {{ signUpForm.get('username')?.getError('customError') }}
          </mat-error>
        </mat-form-field>
        <mat-form-field>
          <input matInput placeholder="Email"  formControlName="email">
          <mat-icon matSuffix>email</mat-icon>
          <mat-error *ngIf="form2.submitted && signUpForm.get('email')?.hasError('required')">
            Email is required
          </mat-error>
          <mat-error *ngIf="signUpForm.get('email')?.hasError('email')">
            Please enter a valid email address
          </mat-error>
          <mat-error *ngIf="form2.submitted && signUpForm.get('email')?.hasError('customError')">
            {{ signUpForm.get('email')?.getError('customError') }}
          </mat-error>
        </mat-form-field>
        <mat-form-field>
          <input matInput placeholder="Password" type="password" required minlength="6" formControlName="password" >
          <mat-icon matSuffix>lock</mat-icon>
          <!-- <mat-error *ngIf="password.invalid && (password.dirty || password.touched)">
            Password must be at least 6 characters long
          </mat-error> -->
          <mat-error *ngIf="signUpForm.get('password')?.hasError('required')">
            Password is required
          </mat-error>
          <mat-error *ngIf="signUpForm.get('password')?.invalid && (signUpForm.get('password')?.dirty || signUpForm.get('password')?.touched)">
            Password must be at least 6 characters long
          </mat-error>
        </mat-form-field>
        <mat-form-field>
          <input matInput placeholder="Confirm Password" type="password" required minlength="6" name="confirmPassword" formControlName="confirmPassword">
          <mat-icon matSuffix>lock</mat-icon>
          <mat-error *ngIf="signUpForm.get('confirmPassword')?.hasError('passwordMismatch')">
            Passwords do not match
          </mat-error>
          <mat-error *ngIf="signUpForm.get('confirmPassword')?.hasError('required')">
            Please confirm your password
          </mat-error>
        </mat-form-field>
        <button mat-raised-button color="primary" class="login-button" type="submit" [disabled]="loading">
          <span *ngIf="!loading">Sign Up</span>
          <mat-spinner *ngIf="loading" diameter="20" color="accent"></mat-spinner> <!-- Add spinner -->
        </button>
      </form>
      <p>Already have an account? <a routerLink="/login">Login here</a>.</p>
    </mat-card-content>
  </mat-card>
</div>
